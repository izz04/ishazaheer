<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    <title>HTML Canvas State</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
      body {
        margin: 0;
        display: flex;
        height: 100vh;
        align-items: center;
        justify-content: center;
      }

      canvas {border: 1px solid black;}
    </style>
  </head>

  <body>
    <canvas width="450" height="100"></canvas>

    <script>
      const canvas = document.querySelector('canvas');
      const context = canvas.getContext('2d');

      let width;
      let height;

      let pxScale = window.devicePixelRatio;

      function setup() {
        width = canvas.width;
        height = canvas.height;

        canvas.style.width = width + 'px';
        canvas.style.height = height + 'px';

        canvas.width = width * pxScale;
        canvas.height = height * pxScale;

        context.scale(pxScale, pxScale);
      }

      function draw() {
        context.fillStyle = 'blue';
        context.fillRect(0, 0, 100, 100);

        context.fillStyle = 'yellow';
        context.fillRect(90, 0, 100, 100);

        context.fillStyle = 'red';
        context.fillRect(180, 0, 100, 100);

        context.fillRect(270, 0, 100, 100);

        context.fillRect(360, 0, 100, 100);
      }

      window.addEventListener('load', () => {
        setup();
        draw();
      });
    </script>
  </body>
</html>